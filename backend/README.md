## 1. Workflow of Authentication
Normal email/password login flow
````
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚    DATABASE     â”‚
â”‚  (Login.jsx)    â”‚    â”‚   (index.js)    â”‚    â”‚   (MongoDB)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
    1.   â”‚ POST /user/login       â”‚                        â”‚
         â”‚ {usernameOrEmail,      â”‚                        â”‚
         â”‚  password}             â”‚                        â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
         â”‚                        â”‚                        â”‚
    2.   â”‚                        â”‚ Find user by email/    â”‚
         â”‚                        â”‚ username               â”‚
         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
         â”‚                        â”‚                        â”‚
    3.   â”‚                        â”‚ Return user object     â”‚
         â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                        â”‚                        â”‚
    4.   â”‚                        â”‚ Compare password       â”‚
         â”‚                        â”‚ with bcrypt            â”‚
         â”‚                        â”‚                        â”‚
    5.   â”‚                        â”‚ Generate JWT token     â”‚
         â”‚                        â”‚                        â”‚
    6.   â”‚                        â”‚ Set HTTP-only cookie   â”‚
         â”‚                        â”‚ (uid=token)            â”‚
         â”‚                        â”‚                        â”‚
    7.   â”‚ Response: success      â”‚                        â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
         â”‚                        â”‚                        â”‚
    8.   â”‚ Redirect to homepage   â”‚                        â”‚
         â”‚ navigate('/')          â”‚                        â”‚
         â”‚                        â”‚                        â”‚
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ“ SUBSEQUENT REQUESTS (How req.user is populated)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚                        â”‚                        â”‚
    9.   â”‚ GET / (any request)    â”‚                        â”‚
         â”‚ Cookie: uid=jwt_token  â”‚                        â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
         â”‚                        â”‚                        â”‚
   10.   â”‚                        â”‚ checkAuth middleware   â”‚
         â”‚                        â”‚ extracts cookie        â”‚
         â”‚                        â”‚                        â”‚
   11.   â”‚                        â”‚ verifyToken(jwt)       â”‚
         â”‚                        â”‚ decodes user info      â”‚
         â”‚                        â”‚                        â”‚
   12.   â”‚                        â”‚ **req.user** = decoded â”‚
         â”‚                        â”‚ user data              â”‚
         â”‚                        â”‚                        â”‚
   13.   â”‚                        â”‚ Continue to route      â”‚
         â”‚                        â”‚ handler                â”‚
         â”‚                        â”‚                        â”‚
````
Google/Github Login flow 
````
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   GOOGLE/GITHUB â”‚    â”‚    DATABASE     â”‚
â”‚  (Login.jsx)    â”‚    â”‚   (index.js)    â”‚    â”‚     SERVERS     â”‚    â”‚   (MongoDB)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚                        â”‚
    1.   â”‚ Click "Continue with   â”‚                        â”‚                        â”‚
         â”‚ Google"                â”‚                        â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    2.   â”‚ Redirect to:           â”‚                        â”‚                        â”‚
         â”‚ /auth/google           â”‚                        â”‚                        â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    3.   â”‚                        â”‚ Passport redirects to  â”‚                        â”‚
         â”‚                        â”‚ Google consent screen  â”‚                        â”‚
         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    4.   â”‚ User sees Google       â”‚                        â”‚                        â”‚
         â”‚ login page             â”‚                        â”‚                        â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    5.   â”‚ User approves access   â”‚                        â”‚                        â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    6.   â”‚                        â”‚ Google redirects back  â”‚                        â”‚
         â”‚                        â”‚ to /auth/google/       â”‚                        â”‚
         â”‚                        â”‚ callback with code     â”‚                        â”‚
         â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    7.   â”‚                        â”‚ Passport exchanges     â”‚                        â”‚
         â”‚                        â”‚ code for access token  â”‚                        â”‚
         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    8.   â”‚                        â”‚ Get user profile       â”‚                        â”‚
         â”‚                        â”‚ data                   â”‚                        â”‚
         â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    9.   â”‚                        â”‚ Check if user exists   â”‚                        â”‚
         â”‚                        â”‚ by googleId            â”‚                        â”‚
         â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
         â”‚                        â”‚                        â”‚                        â”‚
   10.   â”‚                        â”‚ If not exists, create  â”‚                        â”‚
         â”‚                        â”‚ new user               â”‚                        â”‚
         â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                        â”‚                        â”‚                        â”‚
   11.   â”‚                        â”‚ Generate JWT token     â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
   12.   â”‚                        â”‚ Set HTTP-only cookie   â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
   13.   â”‚ Redirect to frontend   â”‚                        â”‚                        â”‚
         â”‚ with success           â”‚                        â”‚                        â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ“ SUBSEQUENT REQUESTS (How req.user is populated - SAME AS NORMAL LOGIN)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚                        â”‚                        â”‚                        â”‚
   14.   â”‚ GET / (any request)    â”‚                        â”‚                        â”‚
         â”‚ Cookie: uid=jwt_token  â”‚                        â”‚                        â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
   15.   â”‚                        â”‚ checkAuth middleware   â”‚                        â”‚
         â”‚                        â”‚ extracts cookie        â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
   16.   â”‚                        â”‚ verifyToken(jwt)       â”‚                        â”‚
         â”‚                        â”‚ decodes user info      â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
   17.   â”‚                        â”‚ req.user = decoded     â”‚                        â”‚
         â”‚                        â”‚ user data              â”‚                        â”‚
         â”‚                        â”‚                        â”‚                        â”‚
````